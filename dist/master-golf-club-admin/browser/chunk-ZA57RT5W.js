import{a as oe,b as re,c as P}from"./chunk-AUROHWJP.js";import{H as Q,L as X,La as Z}from"./chunk-V6TNJ3ZT.js";import{a as le}from"./chunk-DVM5LER3.js";import{Ca as J,Da as K,Ga as ee,Ia as te,Na as ne,R as j,S as A,ab as ie,b as D,c as V,d as R,f as B,g as z,ga as W,h as U,ja as $,pa as Y,qa as G,ra as H}from"./chunk-45BFYFPT.js";import{Jb as o,Kb as i,Lb as L,Pb as x,Tb as h,Ub as p,_ as v,cb as s,db as q,dc as c,ec as u,fc as E,ia as O,ic as S,jc as k,kc as T,mc as I,oc as y,qc as M,rc as F,sc as N,ta as _,tb as w,ua as C,zb as g}from"./chunk-IO45J2MB.js";import{f as ce,k as b}from"./chunk-AAPNLDO3.js";var m=ce(le());var ae=(()=>{let a=class a{constructor(){this.apiUrl=new oe().getUrl(re),this.lists=this.apiUrl+"contactEnquiry/0/listing/",this.processing=this.apiUrl+"contactEnquiry/0/processing/",this.deletion=this.apiUrl+"contactEnquiry/0/deletion/",this.toggleStatus=this.apiUrl+"contactEnquiry/0/toggle_status/"}listEnquiry(e="0"){return P.get(this.lists.replace("0",e))}processEnquiry(e,t="0"){return P.post(this.processing.replace("0",t),e)}deleteEnquiry(e){return P.get(this.deletion.replace("0",e))}toggleEnquiryStatus(e){return P.post(this.toggleStatus.replace("0",e),{})}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();var se=r=>({disabled:r}),pe=r=>({active:r});function ue(r,a){if(r&1){let n=x();o(0,"tr")(1,"td"),c(2),i(),o(3,"td"),c(4),i(),o(5,"td"),c(6),i(),o(7,"td"),c(8),i(),o(9,"td"),c(10),i(),o(11,"td"),c(12),M(13,"date"),i(),o(14,"td")(15,"span",8),c(16),M(17,"titlecase"),i()(),o(18,"td")(19,"div",9)(20,"input",10),h("change",function(){let t=_(n).$implicit,l=p();return C(l.toggleStatus(t.id))}),i(),o(21,"label",11),L(22,"span",12)(23,"span",13),i()()()()}if(r&2){let n=a.$implicit,e=a.index,t=p();s(2),u((t.currentPage-1)*t.itemsPerPage+e+1),s(2),u(n.contactEnquiryFirstName+" "+n.contactEnquiryLastName),s(2),u(n.contactEnquiryPhoneNumber),s(2),u(n.contactEnquiryEmail),s(2),u(n.contactEnquiryMessage),s(2),u(N(13,12,n.contactEnquiryDate,"mediumDate")),s(3),g("ngClass",n.status==="completed"?"status-completed":"status-pending"),s(),E(" ",F(17,15,n.status)," "),s(4),g("id","toggle-"+n.id)("checked",n.status==="completed"),s(),g("for","toggle-"+n.id)("cTooltip","Toggle status: "+(n.status==="complete"?"Mark as Complete":"Reopen Enquiry"))}}function he(r,a){if(r&1){let n=x();o(0,"c-page-item")(1,"a",15),h("click",function(){let t=_(n).$implicit,l=p(2);return C(l.changePage(t))}),c(2),i()()}if(r&2){let n=a.$implicit,e=p(2);s(),g("ngClass",y(2,pe,e.currentPage===n)),s(),E(" ",n," ")}}function me(r,a){if(r&1){let n=x();o(0,"c-pagination",14)(1,"c-page-item")(2,"a",15),h("click",function(){_(n);let t=p();return C(t.previousPage())}),c(3," Previous "),i()(),w(4,he,3,4,"c-page-item",6),o(5,"c-page-item")(6,"a",15),h("click",function(){_(n);let t=p();return C(t.nextPage())}),c(7," Next "),i()()()}if(r&2){let n=p();s(2),g("ngClass",y(3,se,n.currentPage===1)),s(2),g("ngForOf",n.pageRange),s(2),g("ngClass",y(5,se,n.currentPage===n.totalPages))}}var Oe=(()=>{let a=class a{constructor(e){this.enquiryService=e,this.icons={cilClock:X,cilCheckCircle:Q,cilTrash:Z},this.enquiryList=[],this.pageRange=[],this.currentPage=1,this.itemsPerPage=10,this.isLoading=!1,this.searchTerm=""}ngOnInit(){this.loadEnquiryList()}loadEnquiryList(){return b(this,null,function*(){if(!this.isLoading){this.isLoading=!0;try{let e=yield this.enquiryService.listEnquiry("0");e.data.code===1?(this.enquiryList=e.data.data,this.updatePageRange()):yield m.default.fire("Error","Failed to load enquiry list","error")}catch(e){console.error("Error loading enquiry list:",e),yield m.default.fire("Error","An error occurred while loading the enquiry list","error")}finally{this.isLoading=!1}}})}updatePageRange(){let e=this.totalPages,t=Math.max(1,this.currentPage-1);Math.min(e,t+2)===e&&(t=Math.max(1,e-2)),this.pageRange=Array.from({length:Math.min(3,e)},(d,f)=>t+f)}changePage(e){e>=1&&e<=this.totalPages&&!this.isLoading&&(this.currentPage=e,this.updatePageRange())}nextPage(){this.currentPage<this.totalPages&&!this.isLoading&&this.changePage(this.currentPage+1)}previousPage(){this.currentPage>1&&!this.isLoading&&this.changePage(this.currentPage-1)}search(){this.currentPage=1,this.updatePageRange()}get paginatedEnquiryList(){let e=this.enquiryList;if(this.searchTerm){let l=this.searchTerm.toLowerCase();e=this.enquiryList.filter(d=>d.contactEnquiryFirstName.toLowerCase().includes(l)||d.contactEnquiryLastName.toLowerCase().includes(l)||d.contactEnquiryEmail.toLowerCase().includes(l)||d.contactEnquiryPhoneNumber.toLowerCase().includes(l)||d.contactEnquiryMessage.toLowerCase().includes(l))}let t=(this.currentPage-1)*this.itemsPerPage;return e.slice(t,t+this.itemsPerPage)}get totalPages(){let e=this.searchTerm?this.enquiryList.filter(t=>t.contactEnquiryFirstName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.contactEnquiryLastName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.contactEnquiryEmail.toLowerCase().includes(this.searchTerm.toLowerCase())||t.contactEnquiryPhoneNumber.toLowerCase().includes(this.searchTerm.toLowerCase())||t.contactEnquiryMessage.toLowerCase().includes(this.searchTerm.toLowerCase())).length:this.enquiryList.length;return Math.ceil(e/this.itemsPerPage)}toggleStatus(e){return b(this,null,function*(){try{let t=yield this.enquiryService.toggleEnquiryStatus(e.toString());t.data.code===1?(yield this.loadEnquiryList(),yield m.default.fire("Success",t.data.message,"success")):(console.error("Failed to toggle status:",t.data.message),yield m.default.fire("Error","Failed to update status","error"))}catch(t){console.error("Error toggling status:",t),yield m.default.fire("Error","Error updating status","error")}})}getNextStatus(e){return e==="pending"?"completed":"pending"}getStatusIcon(e){return e==="pending"?this.icons.cilCheckCircle:this.icons.cilClock}getButtonColor(e){return e==="pending"?"success":"warning"}filterByStatus(e){e==="all"?this.currentPage=1:this.currentPage=1,this.updatePageRange()}};a.\u0275fac=function(t){return new(t||a)(q(ae))},a.\u0275cmp=O({type:a,selectors:[["app-enquiry"]],standalone:!0,features:[I],decls:27,vars:6,consts:[["xs","12"],[1,"mb-4"],["md","3",1,"mb-4","flex","justify-content-md-end"],["cFormControl","","id","searchInput","type","search","placeholder","Search Enquiries",3,"input","ngModelChange","ngModel"],["cTable","",3,"hover","striped","bordered"],["scope","col"],[4,"ngFor","ngForOf"],["aria-label","Enquiry navigation",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"toggle-switch-container"],["type","checkbox",1,"toggle-switch-input",3,"change","id","checked"],["cTooltipPlacement","top",1,"toggle-switch-label",3,"for","cTooltip"],[1,"toggle-switch-slider"],[1,"toggle-switch-text"],["aria-label","Enquiry navigation"],["cPageLink","",3,"click","ngClass"]],template:function(t,l){t&1&&(o(0,"c-col",0)(1,"c-card",1)(2,"c-card-body")(3,"c-col",2)(4,"input",3),h("input",function(){return l.search()}),T("ngModelChange",function(f){return k(l.searchTerm,f)||(l.searchTerm=f),f}),i()(),o(5,"table",4)(6,"thead")(7,"tr")(8,"th",5),c(9,"S.No"),i(),o(10,"th",5),c(11,"Name"),i(),o(12,"th",5),c(13,"Phone Number"),i(),o(14,"th",5),c(15,"Email"),i(),o(16,"th",5),c(17,"Message"),i(),o(18,"th",5),c(19,"Date"),i(),o(20,"th",5),c(21,"Status"),i(),o(22,"th",5),c(23,"Action"),i()()(),o(24,"tbody"),w(25,ue,24,17,"tr",6),i()(),w(26,me,8,7,"c-pagination",7),i()()()),t&2&&(s(4),S("ngModel",l.searchTerm),s(),g("hover",!0)("striped",!0)("bordered",!0),s(20),g("ngForOf",l.paginatedEnquiryList),s(),g("ngIf",l.enquiryList.length>l.itemsPerPage))},dependencies:[D,U,V,R,B,z,K,$,j,A,ie,ee,te,ne,W,J,H,G,Y],styles:['.toggle-switch-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.toggle-switch-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.toggle-switch-label[_ngcontent-%COMP%]{position:relative;display:inline-block;width:120px;height:40px;border-radius:25px;cursor:pointer;transition:all .4s cubic-bezier(.25,.8,.25,1);margin:0;overflow:hidden;box-shadow:0 4px 12px #0000001a;border:1px solid}.toggle-switch-label[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 6px 20px #00000026}.toggle-switch-slider[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;width:32px;height:32px;background:#fff;border-radius:50%;transition:all .4s cubic-bezier(.25,.8,.25,1);box-shadow:0 3px 8px #0000004d;z-index:3}.toggle-switch-slider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:16px;height:16px;border-radius:50%;transition:all .3s ease}.toggle-switch-text[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);font-size:12px;font-weight:700;color:#fff;z-index:2;transition:all .4s cubic-bezier(.25,.8,.25,1);text-shadow:0 1px 2px rgba(0,0,0,.3);letter-spacing:.5px}.toggle-switch-input[_ngcontent-%COMP%]:not(:checked) + .toggle-switch-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea}.toggle-switch-input[_ngcontent-%COMP%]:not(:checked) + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-slider[_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#5a6fd8,#6a4190)}.toggle-switch-input[_ngcontent-%COMP%]:not(:checked) + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-text[_ngcontent-%COMP%]{right:15px}.toggle-switch-input[_ngcontent-%COMP%]:not(:checked) + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-text[_ngcontent-%COMP%]:after{content:"Complete"}.toggle-switch-input[_ngcontent-%COMP%]:not(:checked) + .toggle-switch-label[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6fd8,#6a4190)}.toggle-switch-input[_ngcontent-%COMP%]:checked + .toggle-switch-label[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7f7fd3,#91a7ff);border-color:#7f7fd3}.toggle-switch-input[_ngcontent-%COMP%]:checked + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-slider[_ngcontent-%COMP%]{left:84px}.toggle-switch-input[_ngcontent-%COMP%]:checked + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-slider[_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#7575cc,#8699ff)}.toggle-switch-input[_ngcontent-%COMP%]:checked + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-text[_ngcontent-%COMP%]{left:15px}.toggle-switch-input[_ngcontent-%COMP%]:checked + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-text[_ngcontent-%COMP%]:after{content:"Reopen"}.toggle-switch-input[_ngcontent-%COMP%]:checked + .toggle-switch-label[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7575cc,#8699ff)}.toggle-switch-input[_ngcontent-%COMP%]:focus + .toggle-switch-label[_ngcontent-%COMP%]{outline:none;box-shadow:0 0 0 3px #667eea4d}.toggle-switch-input[_ngcontent-%COMP%]:active + .toggle-switch-label[_ngcontent-%COMP%]   .toggle-switch-slider[_ngcontent-%COMP%]{transform:scale(.95)}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:600;text-transform:capitalize;display:inline-block;transition:all .3s ease;position:relative;overflow:hidden}.status-badge[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:#ffffff4d;transition:left .4s ease}.status-badge[_ngcontent-%COMP%]:hover:before{left:100%}.status-pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#856404;border:1px solid #ffeaa7}.status-pending[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 12px #ffeaa766}.status-completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#155724;border:1px solid #00b894}.status-completed[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 12px #00b89466}']});let r=a;return r})();export{Oe as EnquiryComponent};
