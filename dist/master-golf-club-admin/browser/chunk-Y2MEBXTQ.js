import{a as Ee}from"./chunk-M44UXPJM.js";import"./chunk-AUROHWJP.js";import{a as Pe}from"./chunk-DVM5LER3.js";import{$a as ye,Ba as me,Ea as ue,Ga as ge,Ha as b,I as te,Ia as pe,Ja as fe,O as ne,Oa as he,P as oe,Ra as Ce,S as ie,Sa as be,Za as ve,_a as we,aa as re,d as W,da as ae,fa as se,g as E,ga as le,h as X,ja as de,ka as ce,r as ee}from"./chunk-KDWJXVH2.js";import{Ac as Q,Ba as t,Ca as G,Fa as H,Ib as c,Jb as l,K as U,Ka as $,Kb as f,P as A,S as j,Sb as w,T as M,Tb as h,Y as N,_ as z,_a as q,aa as L,bb as s,cb as g,cc as m,ec as C,f as P,g as k,ha as v,ia as K,ja as V,kc as Y,lc as y,mc as J,nb as Z,p as O,sb as p,w as I,y as T,yb as d}from"./chunk-X7YB6HNB.js";import{a as x,b as B,f as Re,k as R}from"./chunk-AAPNLDO3.js";var S=()=>{let e=typeof window<"u"?window:void 0;return e&&e.tinymce?e.tinymce:null},Oe=(()=>{class e{onBeforePaste=new t;onBlur=new t;onClick=new t;onCompositionEnd=new t;onCompositionStart=new t;onCompositionUpdate=new t;onContextMenu=new t;onCopy=new t;onCut=new t;onDblclick=new t;onDrag=new t;onDragDrop=new t;onDragEnd=new t;onDragGesture=new t;onDragOver=new t;onDrop=new t;onFocus=new t;onFocusIn=new t;onFocusOut=new t;onKeyDown=new t;onKeyPress=new t;onKeyUp=new t;onMouseDown=new t;onMouseEnter=new t;onMouseLeave=new t;onMouseMove=new t;onMouseOut=new t;onMouseOver=new t;onMouseUp=new t;onPaste=new t;onSelectionChange=new t;onActivate=new t;onAddUndo=new t;onBeforeAddUndo=new t;onBeforeExecCommand=new t;onBeforeGetContent=new t;onBeforeRenderUI=new t;onBeforeSetContent=new t;onChange=new t;onClearUndos=new t;onDeactivate=new t;onDirty=new t;onExecCommand=new t;onGetContent=new t;onHide=new t;onInit=new t;onInput=new t;onInitNgModel=new t;onLoadContent=new t;onNodeChange=new t;onPostProcess=new t;onPostRender=new t;onPreInit=new t;onPreProcess=new t;onProgressState=new t;onRedo=new t;onRemove=new t;onReset=new t;onResizeEditor=new t;onSaveContent=new t;onSetAttrib=new t;onObjectResizeStart=new t;onObjectResized=new t;onObjectSelected=new t;onSetContent=new t;onShow=new t;onSubmit=new t;onUndo=new t;onVisualAid=new t;static \u0275fac=function(o){return new(o||e)};static \u0275dir=V({type:e,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return e})(),Se=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],_=(e,a,n)=>I(e,a).pipe(M(n)),Te=(e,a,n)=>{Ue(e).forEach(i=>{let r=e[i];_(a,i.substring(2),n).subscribe(u=>{ze(r)&&e.ngZone.run(()=>r.emit({event:u,editor:a}))})})},Ue=e=>{let a=_e(e.ignoreEvents,[]);return _e(e.allowedEvents,Se).filter(o=>Se.includes(o)&&!a.includes(o))},_e=(e,a)=>typeof e=="string"?e.split(",").map(n=>n.trim()):Array.isArray(e)?e:a,De=0,Ae=e=>{let n=new Date().getTime(),o=Math.floor(Math.random()*1e9);return De++,e+"_"+o+De+String(n)},Fe=e=>typeof e<"u"&&e.tagName.toLowerCase()==="textarea",Ie=e=>typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" "),je=(e,a)=>Ie(e).concat(Ie(a)),Ne=()=>{},Me=e=>e==null,ze=e=>e.observed||e.observers?.length>0,Le=()=>e=>e.pipe(U(),O(()=>{})),Ke=()=>{let e=new k(null),a=e.pipe(T(Boolean),j(([n,o])=>{let i=n.createElement("script");return i.referrerPolicy="origin",i.type="application/javascript",i.src=o,n.head.appendChild(i),I(i,"load").pipe(Le())}),A({bufferSize:1,refCount:!0}));return{load:(...n)=>(e.getValue()||e.next(n),a),reinitialize:()=>{e.next(null)}}},Ve=Ke(),Ge=new L("TINYMCE_SCRIPT_SRC"),He={provide:ue,useExisting:N(()=>D),multi:!0},D=(()=>{class e extends Oe{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(n){this._disabled=n,this._editor&&this._editor.initialized&&(typeof this._editor.mode?.set=="function"?this._editor.mode.set(n?"readonly":"design"):this._editor.setMode(n?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=Ne;onChangeCallback;destroy$=new P;constructor(n,o,i,r,u){super(),this.cdRef=i,this.platformId=r,this.tinymceScriptSrc=u,this._elementRef=n,this.ngZone=o}writeValue(n){this._editor&&this._editor.initialized?this._editor.setContent(Me(n)?"":n):this.initialValue=n===null?void 0:n}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}setDisabledState(n){this.disabled=n}ngAfterViewInit(){X(this.platformId)&&(this.id=this.id||Ae("tiny-angular"),this.inline=this.inline!==void 0?this.inline!==!1:!!this.init?.inline,this.createElement(),S()!==null?this.initialise():this._element&&this._element.ownerDocument&&Ve.load(this._element.ownerDocument,this.getScriptSrc()).pipe(M(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),S()!==null&&S().remove(this._editor)}createElement(){let n=typeof this.tagName=="string"?this.tagName:"div";if(this._element=document.createElement(this.inline?n:"textarea"),this._element){let o=document.getElementById(this.id);o&&o!==this._elementRef.nativeElement&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,Fe(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element)}}initialise=()=>{let n=B(x({},this.init),{selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:je(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:o=>{this._editor=o,_(o,"init",this.destroy$).subscribe(()=>{this.initEditor(o)}),Te(this,o,this.destroy$),this.init&&typeof this.init.setup=="function"&&this.init.setup(o)}});Fe(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{S().init(n)})};getScriptSrc(){return Me(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(n){_(n,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),_(n,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(n))}),typeof this.initialValue=="string"&&this.ngZone.run(()=>{n.setContent(this.initialValue),n.getContent()!==this.initialValue&&this.emitOnChange(n),this.onInitNgModel!==void 0&&this.onInitNgModel.emit(n)})}emitOnChange(n){this.onChangeCallback&&this.onChangeCallback(n.getContent({format:this.outputFormat}))}static \u0275fac=function(o){return new(o||e)(g(H),g(G),g(Q),g($),g(Ge,8))};static \u0275cmp=v({type:e,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[Y([He]),Z,y],decls:0,vars:0,template:function(o,i){},dependencies:[E,we],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return e})(),xe=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=K({type:e});static \u0275inj=z({imports:[D]})}return e})();var F=Re(Pe());var qe=()=>({plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat"});function Ze(e,a){if(e&1&&(c(0,"c-form-feedback",22),m(1),l()),e&2){let n=h();d("valid",!1),s(),C(" ",n.getErrorMessage("blogTitle")," ")}}function Ye(e,a){if(e&1&&(c(0,"c-form-feedback",22),m(1),l()),e&2){let n=h();d("valid",!1),s(),C(" ",n.getErrorMessage("blogDate")," ")}}function Je(e,a){if(e&1&&(c(0,"c-form-feedback",22),m(1),l()),e&2){let n=h();d("valid",!1),s(),C(" ",n.getErrorMessage("blogHighlight")," ")}}function Qe(e,a){if(e&1&&(c(0,"c-form-feedback",22),m(1),l()),e&2){let n=h();d("valid",!1),s(),C(" ",n.getErrorMessage("blogDescription")," ")}}function We(e,a){if(e&1&&(c(0,"c-form-feedback",22),m(1),l()),e&2){let n=h();d("valid",!1),s(),C(" ",n.getErrorMessage("blogImage")," ")}}function Xe(e,a){if(e&1&&(c(0,"div",15),f(1,"img",23),l()),e&2){let n=h();s(),d("src",n.imagePreview,q)}}function et(e,a){e&1&&f(0,"c-spinner",24)}var yt=(()=>{let a=class a{constructor(o,i,r){this.formBuilder=o,this.blogService=i,this.router=r,this.loading=!1,this.submitted=!1,this.selectedFile=null,this.imagePreview=null}ngOnInit(){this.initializeForm()}initializeForm(){this.blogForm=this.formBuilder.group({blogTitle:["",[b.required,b.minLength(3)]],blogDate:["",[b.required]],blogDescription:["",[b.required]],blogHighlight:[""],blogImage:[null]})}onFileChange(o){let r=o.target.files?.[0];if(r){if(r.size>5*1024*1024){F.default.fire({title:"Error!",text:"File size should not exceed 5MB",icon:"error"});return}this.selectedFile=r;let u=new FileReader;u.onload=()=>{this.imagePreview=u.result},u.readAsDataURL(r)}}onSubmit(){return R(this,null,function*(){if(this.submitted=!0,this.blogForm.invalid){Object.keys(this.blogForm.controls).forEach(o=>{let i=this.blogForm.get(o);i?.invalid&&i.markAsTouched()});return}try{this.loading=!0;let o=new FormData;Object.keys(this.blogForm.value).forEach(r=>{r!=="blogImage"&&o.append(r,this.blogForm.value[r])}),this.selectedFile&&o.append("blogImage",this.selectedFile);let i=yield this.blogService.processBlog(o);if(i.data.code===1)yield F.default.fire({title:"Success!",text:"Blog post has been created successfully",icon:"success",confirmButtonText:"Ok"}),this.router.navigate(["/blog"]);else throw new Error(i.data.message||"Failed to create blog post")}catch(o){console.error("Error creating blog:",o),yield F.default.fire({title:"Error!",text:o instanceof Error?o.message:"Failed to create blog post",icon:"error",confirmButtonText:"Ok"})}finally{this.loading=!1}})}onReset(){this.submitted=!1,this.blogForm.reset(),this.selectedFile=null,this.imagePreview=null}isFieldInvalid(o){let i=this.blogForm.get(o);return!!(i&&i.invalid&&(i.dirty||i.touched||this.submitted))}getErrorMessage(o){let i=this.blogForm.get(o);return!i||!i.errors?"":i.errors.required?"This field is required":i.errors.minlength?`Minimum length is ${i.errors.minlength.requiredLength} characters`:i.errors.maxlength?`Maximum length is ${i.errors.maxlength.requiredLength} characters`:"Invalid input"}};a.\u0275fac=function(i){return new(i||a)(g(ve),g(Ee),g(ee))},a.\u0275cmp=v({type:a,selectors:[["app-create-blog"]],standalone:!0,features:[y],decls:41,vars:16,consts:[["xs","12"],[1,"mb-4"],[1,"row","g-3","needs-validation",3,"ngSubmit","formGroup"],["md","6",3,"cFormFloating"],["cFormControl","","id","blogTitle","formControlName","blogTitle","type","text","placeholder","Blog Title"],["cLabel","","for","blogTitle"],[3,"valid",4,"ngIf"],["cFormControl","","id","blogDate","formControlName","blogDate","type","date","placeholder","Blog Date"],["cLabel","","for","blogDate"],["md","12",3,"cFormFloating"],["cFormControl","","id","blogHighlight","formControlName","blogHighlight","placeholder","Highlight","rows","3"],["cLabel","","for","blogHighlight",1,"ms-2"],["md","12"],["cLabel","","for","blogDescription"],["apiKey","jrj64u0e25jw0n4a9v0jbajhi9iakdkeyta9ryl58xwmqwz7","formControlName","blogDescription",3,"init"],[1,"mb-3"],["cLabel","","for","blogImage"],["cFormControl","","id","blogImage","type","file","accept","image/*",3,"change"],["class","mb-3",4,"ngIf"],["cButton","","color","primary","type","submit",1,"me-2",3,"disabled"],["size","sm","class","me-1",4,"ngIf"],["cButton","","color","secondary","type","button",3,"click","disabled"],[3,"valid"],["alt","Preview",1,"img-thumbnail",2,"max-width","200px",3,"src"],["size","sm",1,"me-1"]],template:function(i,r){i&1&&(c(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header")(4,"strong"),m(5,"Create New Blog Post"),l()(),c(6,"c-card-body")(7,"form",2),w("ngSubmit",function(){return r.onSubmit()}),c(8,"c-col",3),f(9,"input",4),c(10,"label",5),m(11,"Blog Title"),l(),p(12,Ze,2,2,"c-form-feedback",6),l(),c(13,"c-col",3),f(14,"input",7),c(15,"label",8),m(16,"Blog Date"),l(),p(17,Ye,2,2,"c-form-feedback",6),l(),c(18,"c-col",9),f(19,"textarea",10),c(20,"label",11),m(21,"Highlight"),l(),p(22,Je,2,2,"c-form-feedback",6),l(),c(23,"c-col",12)(24,"label",13),m(25,"Blog Description"),l(),f(26,"editor",14),p(27,Qe,2,2,"c-form-feedback",6),l(),c(28,"c-col",12)(29,"div",15)(30,"label",16),m(31,"Blog Image"),l(),c(32,"input",17),w("change",function(Be){return r.onFileChange(Be)}),l(),p(33,We,2,2,"c-form-feedback",6),l(),p(34,Xe,2,1,"div",18),l(),c(35,"c-col",0)(36,"button",19),p(37,et,1,0,"c-spinner",20),m(38),l(),c(39,"button",21),w("click",function(){return r.onReset()}),m(40," Reset Form "),l()()()()()()()),i&2&&(s(7),d("formGroup",r.blogForm),s(),d("cFormFloating",!0),s(4),d("ngIf",r.isFieldInvalid("blogTitle")),s(),d("cFormFloating",!0),s(4),d("ngIf",r.isFieldInvalid("blogDate")),s(),d("cFormFloating",!0),s(4),d("ngIf",r.isFieldInvalid("blogHighlight")),s(4),d("init",J(15,qe)),s(),d("ngIf",r.isFieldInvalid("blogDescription")),s(6),d("ngIf",r.isFieldInvalid("blogImage")),s(),d("ngIf",r.imagePreview),s(2),d("disabled",r.loading||r.blogForm.invalid),s(),d("ngIf",r.loading),s(),C(" ",r.loading?"Saving...":"Publish Blog"," "),s(),d("disabled",r.loading))},dependencies:[W,E,ye,he,ge,pe,fe,Ce,be,xe,D,ne,ie,oe,le,ae,se,re,te,ce,de,me]});let e=a;return e})();export{yt as CreateBlogComponent};
