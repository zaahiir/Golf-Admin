import{a as K,b as Q,c as F}from"./chunk-GFV7M3J3.js";import{a as Z}from"./chunk-C4ZII7PO.js";import{Ca as j,Da as g,Ea as G,Fa as O,H as E,Ka as V,M as T,N as k,Na as P,Oa as z,Q as w,Ua as A,Va as H,Wa as $,Xa as J,_ as M,ba as N,d as B,da as q,ea as L,f as S,ha as R,ia as U,q as D}from"./chunk-MQQCFL5Y.js";import{$b as m,Hb as n,Ib as l,Jb as b,Pb as h,Qb as f,Y as I,ab as r,bb as u,bc as d,ga as _,ic as x,rb as p,xb as c}from"./chunk-7U6K5JTK.js";import{f as Y,k as y}from"./chunk-AAPNLDO3.js";var v=Y(Z());var W=(()=>{let o=class o{constructor(){this.apiUrl=new K().getUrl(Q),this.lists=this.apiUrl+"blog/0/listing/",this.processing=this.apiUrl+"blog/0/processing/",this.deletion=this.apiUrl+"blog/0/deletion/"}listBlog(t="0"){return F.get(this.lists.replace("0",t))}processBlog(t,e="0"){return F.post(this.processing.replace("0",e),t)}deleteBlog(t){return F.get(this.deletion.replace("0",t))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=I({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();function ie(i,o){if(i&1&&(n(0,"c-form-feedback",16),m(1),l()),i&2){let s=f();c("valid",!1),r(),d(" ",s.getErrorMessage("blogTitle")," ")}}function oe(i,o){if(i&1&&(n(0,"c-form-feedback",16),m(1),l()),i&2){let s=f();c("valid",!1),r(),d(" ",s.getErrorMessage("blogDate")," ")}}function re(i,o){if(i&1&&(n(0,"c-form-feedback",16),m(1),l()),i&2){let s=f();c("valid",!1),r(),d(" ",s.getErrorMessage("blogDescription")," ")}}function ne(i,o){if(i&1&&(n(0,"c-form-feedback",16),m(1),l()),i&2){let s=f();c("valid",!1),r(),d(" ",s.getErrorMessage("blogImage")," ")}}var pe=(()=>{let o=class o{constructor(t,e,a){this.formBuilder=t,this.blogService=e,this.router=a,this.loading=!1,this.submitted=!1,this.selectedFile=null}ngOnInit(){this.initializeForm()}initializeForm(){this.blogForm=this.formBuilder.group({blogTitle:["",[g.required,g.minLength(3)]],blogDate:["",[g.required]],blogDescription:["",[g.required,g.minLength(10)]],blogImage:[""]})}onFileChange(t){let a=t.target.files?.[0];a&&(this.selectedFile=a)}onSubmit(){return y(this,null,function*(){if(this.submitted=!0,!this.blogForm.invalid)try{this.loading=!0;let t=new FormData;Object.keys(this.blogForm.value).forEach(e=>{e!=="blogImage"&&t.append(e,this.blogForm.value[e])}),this.selectedFile&&t.append("blogImage",this.selectedFile),yield this.blogService.processBlog(t),yield v.default.fire({title:"Success!",text:"Blog post has been created successfully",icon:"success",confirmButtonText:"Ok"}),this.router.navigate(["/blogs"])}catch(t){console.error("Error creating blog:",t),yield v.default.fire({title:"Error!",text:"Failed to create blog post",icon:"error",confirmButtonText:"Ok"})}finally{this.loading=!1}})}onReset(){this.submitted=!1,this.blogForm.reset(),this.selectedFile=null}isFieldInvalid(t){let e=this.blogForm.get(t);return!!(e&&e.invalid&&(e.dirty||e.touched||this.submitted))}getErrorMessage(t){let e=this.blogForm.get(t);return!e||!e.errors?"":e.errors.required?"This field is required":e.errors.minlength?`Minimum length is ${e.errors.minlength.requiredLength} characters`:"Invalid input"}};o.\u0275fac=function(e){return new(e||o)(u(H),u(W),u(D))},o.\u0275cmp=_({type:o,selectors:[["app-create-blog"]],standalone:!0,features:[x],decls:33,vars:12,consts:[["xs","12"],[1,"mb-4"],[1,"row","g-3","needs-validation",3,"ngSubmit","formGroup"],["md","6",3,"cFormFloating"],["cFormControl","","id","blogTitle","formControlName","blogTitle","required","","type","text","placeholder","Blog Title"],["cLabel","","for","blogTitle",1,"ms-2"],[3,"valid",4,"ngIf"],["cFormControl","","id","blogDate","formControlName","blogDate","required","","type","date","placeholder","Blog Date"],["cLabel","","for","blogDate",1,"ms-2"],["md","12",3,"cFormFloating"],["cFormControl","","id","blogDescription","formControlName","blogDescription","required","","rows","6","placeholder","Blog Description"],["cLabel","","for","blogDescription",1,"ms-2"],["cFormControl","","id","blogImage","formControlName","blogImage","type","file","accept","image/*",3,"change"],["cLabel","","for","blogImage",1,"ms-2"],["cButton","","color","primary","type","submit",1,"me-1",3,"disabled"],["cButton","","color","secondary","type","button",3,"click","disabled"],[3,"valid"]],template:function(e,a){e&1&&(n(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header")(4,"strong"),m(5,"Create New Blog Post"),l()(),n(6,"c-card-body")(7,"form",2),h("ngSubmit",function(){return a.onSubmit()}),n(8,"c-col",3),b(9,"input",4),n(10,"label",5),m(11,"Blog Title"),l(),p(12,ie,2,2,"c-form-feedback",6),l(),n(13,"c-col",3),b(14,"input",7),n(15,"label",8),m(16,"Blog Date"),l(),p(17,oe,2,2,"c-form-feedback",6),l(),n(18,"c-col",9),b(19,"textarea",10),n(20,"label",11),m(21,"Blog Description"),l(),p(22,re,2,2,"c-form-feedback",6),l(),n(23,"c-col",9)(24,"input",12),h("change",function(X){return a.onFileChange(X)}),l(),n(25,"label",13),m(26,"Blog Image"),l(),p(27,ne,2,2,"c-form-feedback",6),l(),n(28,"c-col",0)(29,"button",14),m(30),l(),n(31,"button",15),h("click",function(){return a.onReset()}),m(32," Reset Form "),l()()()()()()()),e&2&&(r(7),c("formGroup",a.blogForm),r(),c("cFormFloating",!0),r(4),c("ngIf",a.isFieldInvalid("blogTitle")),r(),c("cFormFloating",!0),r(4),c("ngIf",a.isFieldInvalid("blogDate")),r(),c("cFormFloating",!0),r(4),c("ngIf",a.isFieldInvalid("blogDescription")),r(),c("cFormFloating",!0),r(4),c("ngIf",a.isFieldInvalid("blogImage")),r(2),c("disabled",a.loading),r(),d(" ",a.loading?"Saving...":"Publish Blog"," "),r(),c("disabled",a.loading))},dependencies:[B,S,J,V,j,G,O,A,P,z,$,T,w,k,L,N,q,M,E,U,R]});let i=o;return i})();export{pe as CreateBlogComponent};
