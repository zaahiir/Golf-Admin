<c-col xs="12">
  <c-card class="mb-4">
    <c-card-body>
      <c-col md="3" class="mb-4 flex justify-content-md-end">
        <input
          cFormControl
          id="searchInput"
          (input)="search()"
          [(ngModel)]="searchTerm"
          type="search"
          placeholder="Search Enquiries"
        />
      </c-col>

      <table [hover]="true" [striped]="true" [bordered]="true" cTable>
        <thead>
          <tr>
            <th scope="col">S.No</th>
            <th scope="col">Name</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Email</th>
            <th scope="col">Message</th>
            <th scope="col">Date</th>
            <th scope="col">Status</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let enquiry of paginatedEnquiryList; let i = index">
            <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
            <td>{{ enquiry.contactEnquiryFirstName + ' ' + enquiry.contactEnquiryLastName }}</td>
            <td>{{ enquiry.contactEnquiryPhoneNumber }}</td>
            <td>{{ enquiry.contactEnquiryEmail }}</td>
            <td>{{ enquiry.contactEnquiryMessage }}</td>
            <td>{{ enquiry.contactEnquiryDate | date:'mediumDate' }}</td>
            <td>
              <c-badge
                [color]="enquiry.status === 'completed' ? 'success' : 'warning'"
                class="text-capitalize">
                {{ enquiry.status }}
              </c-badge>
            </td>
            <td>
              <!-- Status Toggle Buttons -->
              <c-button-group size="sm" class="me-2">
                <button
                  cButton
                  [color]="enquiry.status === 'pending' ? 'warning' : 'outline-warning'"
                  [disabled]="enquiry.status === 'pending'"
                  (click)="updateStatus(enquiry.id, 'pending')"
                  size="sm"
                  [cTooltip]="'Mark as Pending'"
                  cTooltipPlacement="top"
                >
                  <svg [cIcon]="icons.cilClock" width="16"></svg>
                </button>
                <button
                  cButton
                  [color]="enquiry.status === 'completed' ? 'success' : 'outline-success'"
                  [disabled]="enquiry.status === 'completed'"
                  (click)="updateStatus(enquiry.id, 'completed')"
                  size="sm"
                  [cTooltip]="'Mark as Completed'"
                  cTooltipPlacement="top"
                >
                  <svg [cIcon]="icons.cilCheckCircle" width="16"></svg>
                </button>
              </c-button-group>

              <!-- Delete Button -->
              <button
                cButton
                (click)="deleteEnquiry(enquiry.id)"
                color="danger"
                variant="outline"
                size="sm"
                [cTooltip]="'Delete Enquiry'"
                cTooltipPlacement="top"
              >
                <svg [cIcon]="icons.cilTrash" width="16"></svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <c-pagination
        *ngIf="enquiryList.length > itemsPerPage"
        aria-label="Enquiry navigation"
      >
        <c-page-item>
          <a
            cPageLink
            (click)="previousPage()"
            [ngClass]="{'disabled': currentPage === 1}"
          >
            Previous
          </a>
        </c-page-item>
        <c-page-item *ngFor="let page of pageRange">
          <a
            cPageLink
            (click)="changePage(page)"
            [ngClass]="{'active': currentPage === page}"
          >
            {{ page }}
          </a>
        </c-page-item>
        <c-page-item>
          <a
            cPageLink
            (click)="nextPage()"
            [ngClass]="{'disabled': currentPage === totalPages}"
          >
            Next
          </a>
        </c-page-item>
      </c-pagination>
    </c-card-body>
  </c-card>
</c-col>
